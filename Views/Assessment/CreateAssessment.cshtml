@model Milestone3WebApp.Models.CreateAssessmentViewModel

<h2>Create New Assessment</h2>

<form id="create-assessment-form" method="post">
    <div class="form-group">
        <label for="AssessmentName">Assessment Name:</label>
        <input type="text" id="AssessmentName" name="AssessmentName" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="ModuleID">Module ID:</label>
        <input type="number" id="ModuleID" name="ModuleID" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="CourseID">Course ID:</label>
        <input type="number" id="CourseID" name="CourseID" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="Type">Type:</label>
        <input type="text" id="Type" name="Type" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="TotalMarks">Total Marks:</label>
        <input type="number" id="TotalMarks" name="TotalMarks" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="PassingMarks">Passing Marks:</label>
        <input type="number" id="PassingMarks" name="PassingMarks" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="Criteria">Criteria:</label>
        <textarea id="Criteria" name="Criteria" class="form-control"></textarea>
    </div>
    <div class="form-group">
        <label for="Weightage">Weightage (%):</label>
        <input type="number" step="0.01" id="Weightage" name="Weightage" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="Description">Description:</label>
        <textarea id="Description" name="Description" class="form-control"></textarea>
    </div>
    <div class="form-group">
        <label for="Title">Title:</label>
        <input type="Title" id="Title" name="Title" class="form-control" required />
    </div>

    <button type="button" id="create-assessment-btn" class="btn btn-success">Create Assessment</button>
</form>

<script>
    // Create Assessment
    document.getElementById('create-assessment-btn').addEventListener('click', function () {
        const form = document.getElementById('create-assessment-form');
        const formData = new FormData(form);

        fetch('@Url.Action("AddAssessment", "Assessment")', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(Object.fromEntries(formData))
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            if (data.success) {
                form.reset();
            }
        })
        .catch(error => alert('An error occurred: ' + error));
    });
</script>